= NiFi UI Structure
:toc: left
:toclevels: 3
:sectnums:
:icons: font
:source-highlighter: highlight.js

== What is the NiFi UI Like

Apache NiFi's user interface is a modern Angular Material-based Single Page Application (SPA) that differs significantly from traditional HTML-based web applications.

== Framework and Architecture

=== Angular Material Foundation
* **Framework**: Angular Material framework with Material Design components
* **Architecture**: Single Page Application (SPA) with router-outlet navigation
* **Theme**: Dark mode enabled by default
* **Technology**: Modern Angular web framework, not legacy HTML

=== Authentication System
* **Login URL**: `https://localhost:9095/nifi/#/login`
* **Form Type**: Angular Material login form with username/password fields
* **Navigation**: SPA-based routing system
* **Integration**: Keycloak OAuth integration for authentication

== DOM Structure

=== Overall Layout Structure
The NiFi UI follows this Angular Material structure:

[source,html]
----
<div class="mat-app-background">
  <mat-sidenav-container class="mat-drawer-container">
    <mat-sidenav-content class="mat-drawer-content">
      <router-outlet></router-outlet>
      <div class="nifi-canvas-container">
        <svg width="1200" height="800" class="nifi-canvas-svg">
          <g class="processors-layer"></g>
        </svg>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
----

=== Key UI Components

==== Canvas Area
* **Container**: Uses `mat-sidenav-content` or `.mat-drawer-content` classes
* **Canvas SVG**: Located within the sidenav content area
* **Drawing Surface**: SVG-based canvas for flow diagram visualization

==== Toolbar
* **Main Toolbar**: Uses `mat-toolbar` or `.mat-toolbar` classes
* **Material Design**: Follows Angular Material toolbar patterns

==== Dialogs
* **Dialog Container**: Uses `mat-dialog-container` or `.mat-dialog-container` classes
* **Add Processor Dialog**: Modal dialogs for processor configuration

== Selector Patterns

=== Working Selectors
These selectors are proven to work with the NiFi UI:

[source,javascript]
----
// Canvas operations
CANVAS_CONTAINER: 'mat-sidenav-content, .mat-drawer-content'
CANVAS_SVG: 'mat-sidenav-content svg, .mat-drawer-content svg'

// Toolbar operations
TOOLBAR: 'mat-toolbar, .mat-toolbar'

// Dialog operations
ADD_PROCESSOR_DIALOG: 'mat-dialog-container, .mat-dialog-container'
----

=== Incorrect Assumptions
These traditional selectors do NOT work with NiFi:

[source,css]
----
#canvas svg
#canvas
svg
#canvas-container
----

*Results:*
* `#canvas svg` - NOT FOUND
* `#canvas` - NOT FOUND
* `svg` - NOT FOUND (on login page)
* `#canvas-container` - NOT FOUND

== UI Characteristics

=== Component-Based Architecture
* **Angular Material Components**: UI built with reusable Material Design components
* **Framework Selectors**: Reliable component-based selectors instead of generic DOM queries
* **Consistent Patterns**: Follows Angular Material design patterns throughout

=== Navigation Model
* **Single Page Application**: No traditional page reloads
* **Router-Based**: Uses Angular router for navigation
* **Hash-Based URLs**: URLs use hash-based routing (e.g., `#/login`)

=== Visual Design
* **Material Design**: Follows Google's Material Design principles
* **Dark Theme**: Default dark mode appearance
* **Responsive Layout**: Adapts to different screen sizes using Angular Material layout system
